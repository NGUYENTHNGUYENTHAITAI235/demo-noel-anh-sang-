<!-- xin chÃ o ngÆ°á»i láº¡, mÃ¬nh lÃ  anhduc.onlien | mÃ¬nh cÃ³ tÃ¬m Ä‘Æ°á»£c file code noel nÃ y vÃ  fix láº¡i, mÃ¬nh xin phÃ©p share má»i ngÆ°á»i áº¡! -->
<!DOCTYPE html>
<html lang="VN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOEL_V2</title>

    <style>
        body { margin: 0; overflow: hidden; background-color: #000000; font-family: 'Times New Roman', serif; }
        #canvas-container { width: 100vw; height: 100vh; position: absolute; top: 0; left: 0; z-index: 1; }

        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; pointer-events: none;
            display: flex; flex-direction: column;
            align-items: center;
            padding-top: 40px;
        }

        .ui-hidden { opacity: 0; pointer-events: none !important; }

        #loader {
            position: absolute; inset: 0;
            background: #000; z-index: 100;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: opacity 0.8s ease-out;
        }

        .loader-text {
            color: #d4af37; font-size: 14px;
            letter-spacing: 4px; margin-top: 20px;
            text-transform: uppercase;
        }

        .spinner {
            width: 40px; height: 40px;
            border: 1px solid rgba(212,175,55,.2);
            border-top: 1px solid #d4af37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        h1 {
            color: #fceea7; font-size: 56px;
            letter-spacing: 6px;
            text-shadow: 0 0 50px rgba(252,238,167,.6);
            background: linear-gradient(to bottom,#fff,#eebb66);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Cinzel', serif;
        }

        .upload-wrapper {
            margin-top: 20px;
            pointer-events: auto;
        }

        .upload-btn {
            background: rgba(20,20,20,.6);
            border: 1px solid rgba(212,175,55,.4);
            color: #d4af37;
            padding: 10px 25px;
            cursor: pointer;
            letter-spacing: 3px;
            font-size: 10px;
        }

        #file-input { display: none; }
    </style>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap');
    </style>

    <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
        "@mediapipe/tasks-vision": "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/+esm"
      }
    }
    </script>
</head>

<body>

<div id="loader">
    <div class="spinner"></div>
    <div class="loader-text">Loading Holiday Magic</div>
</div>

<div id="canvas-container"></div>

<div id="ui-layer">
    <h1></h1>
    <div class="upload-wrapper">
        <label class="upload-btn">
            ThÃªm áº£nh
            <input type="file" id="file-input" multiple accept="image/*">
        </label>
    </div>
</div>

<!-- ðŸŽµ NHáº C Ná»€N -->
<audio id="bg-music" loop>
    <source src="./in-love.mp3" type="audio/mpeg">
</audio>

<script type="module">
import * as THREE from 'three';
import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

/* ===== MUSIC SAFE PLAY ===== */
const bgMusic = document.getElementById('bg-music');
let musicStarted = false;

function startMusic() {
    if (musicStarted) return;
    musicStarted = true;
    bgMusic.volume = 0.4;
    bgMusic.play().catch(()=>{});
}

window.addEventListener('click', startMusic, { once:true });
window.addEventListener('keydown', startMusic, { once:true });

/* ===== THREE BASIC*
